<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <title>監視と可観測性スタック</title>
  <desc>ITインフラのモニタリング、ロギング、トレーシングを統合した可観測性スタックの詳細アーキテクチャ</desc>
  <defs>
    <style>
      :root {
        --svg-bg: #FFFFFF;
        --svg-bg-alt: #F8F9FA;
        --svg-text: #1A1A1A;
        --svg-text-secondary: #666666;
        --svg-border: #E0E0E0;
        --svg-primary: #0066CC;
        --svg-success: #059669;
        --svg-warning: #D97706;
        --svg-error: #DC2626;
        --svg-neutral: #6B7280;
      }
      .title-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 16px; font-weight: 600; fill: var(--svg-text); }
      .section-title { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 12px; font-weight: 500; fill: white; }
      .component-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 12px; font-weight: 400; fill: var(--svg-text); }
      .label-text { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; font-size: 10px; font-weight: 400; fill: var(--svg-text-secondary); }
      .metrics-layer { fill: var(--svg-primary); stroke: var(--svg-primary); stroke-width: 2; }
      .logs-layer { fill: var(--svg-success); stroke: var(--svg-success); stroke-width: 2; }
      .traces-layer { fill: var(--svg-warning); stroke: var(--svg-warning); stroke-width: 2; }
      .analysis-layer { fill: var(--svg-error); stroke: var(--svg-error); stroke-width: 2; }
      .data-flow { stroke: var(--svg-primary); stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .alert-flow { stroke: var(--svg-error); stroke-width: 2; stroke-dasharray: 5,3; fill: none; marker-end: url(#arrowhead-red); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="var(--svg-primary)"/>
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="var(--svg-error)"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="30" class="title-text" text-anchor="middle">監視と可観測性スタック</text>

  <!-- Data Sources Layer -->
  <g id="data-sources">
    <rect x="40" y="60" width="720" height="80" fill="var(--svg-bg-alt)" stroke="var(--svg-border)" stroke-width="2" rx="4"/>
    <text x="400" y="80" class="component-text" text-anchor="middle" font-weight="500">データソース</text>
    
    <rect x="60" y="90" width="100" height="40" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="110" y="105" class="component-text" text-anchor="middle">アプリケーション</text>
    <text x="110" y="120" class="label-text" text-anchor="middle">APM/Logs</text>
    
    <rect x="180" y="90" width="100" height="40" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="230" y="105" class="component-text" text-anchor="middle">インフラ</text>
    <text x="230" y="120" class="label-text" text-anchor="middle">OS/Container</text>
    
    <rect x="300" y="90" width="100" height="40" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="350" y="105" class="component-text" text-anchor="middle">ネットワーク</text>
    <text x="350" y="120" class="label-text" text-anchor="middle">Flow/SNMP</text>
    
    <rect x="420" y="90" width="100" height="40" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="470" y="105" class="component-text" text-anchor="middle">データベース</text>
    <text x="470" y="120" class="label-text" text-anchor="middle">Query/Stats</text>
    
    <rect x="540" y="90" width="100" height="40" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="590" y="105" class="component-text" text-anchor="middle">クラウド</text>
    <text x="590" y="120" class="label-text" text-anchor="middle">API/Metrics</text>
    
    <rect x="660" y="90" width="80" height="40" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="700" y="105" class="component-text" text-anchor="middle">IoT</text>
    <text x="700" y="120" class="label-text" text-anchor="middle">Sensors</text>
  </g>

  <!-- Metrics Collection -->
  <g id="metrics-layer">
    <rect x="40" y="160" width="230" height="140" class="metrics-layer" rx="4"/>
    <text x="155" y="180" class="section-title" text-anchor="middle">メトリクス収集</text>
    
    <rect x="56" y="190" width="90" height="40" fill="white" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="101" y="205" class="component-text" text-anchor="middle">Prometheus</text>
    <text x="101" y="220" class="label-text" text-anchor="middle">Pull型</text>
    
    <rect x="156" y="190" width="90" height="40" fill="white" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="201" y="205" class="component-text" text-anchor="middle">Telegraf</text>
    <text x="201" y="220" class="label-text" text-anchor="middle">Agent</text>
    
    <rect x="56" y="240" width="90" height="40" fill="white" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="101" y="255" class="component-text" text-anchor="middle">StatsD</text>
    <text x="101" y="270" class="label-text" text-anchor="middle">UDP</text>
    
    <rect x="156" y="240" width="90" height="40" fill="white" stroke="var(--svg-primary)" stroke-width="1" rx="4"/>
    <text x="201" y="255" class="component-text" text-anchor="middle">Node Exporter</text>
    <text x="201" y="270" class="label-text" text-anchor="middle">システム</text>
  </g>

  <!-- Logs Collection -->
  <g id="logs-layer">
    <rect x="290" y="160" width="230" height="140" class="logs-layer" rx="4"/>
    <text x="405" y="180" class="section-title" text-anchor="middle">ログ収集</text>
    
    <rect x="306" y="190" width="90" height="40" fill="white" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="351" y="205" class="component-text" text-anchor="middle">Fluentd</text>
    <text x="351" y="220" class="label-text" text-anchor="middle">統合収集</text>
    
    <rect x="406" y="190" width="90" height="40" fill="white" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="451" y="205" class="component-text" text-anchor="middle">Logstash</text>
    <text x="451" y="220" class="label-text" text-anchor="middle">ETL</text>
    
    <rect x="306" y="240" width="90" height="40" fill="white" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="351" y="255" class="component-text" text-anchor="middle">Filebeat</text>
    <text x="351" y="270" class="label-text" text-anchor="middle">軽量Agent</text>
    
    <rect x="406" y="240" width="90" height="40" fill="white" stroke="var(--svg-success)" stroke-width="1" rx="4"/>
    <text x="451" y="255" class="component-text" text-anchor="middle">Vector</text>
    <text x="451" y="270" class="label-text" text-anchor="middle">高性能</text>
  </g>

  <!-- Traces Collection -->
  <g id="traces-layer">
    <rect x="540" y="160" width="220" height="140" class="traces-layer" rx="4"/>
    <text x="650" y="180" class="section-title" text-anchor="middle">トレース収集</text>
    
    <rect x="556" y="190" width="90" height="40" fill="white" stroke="var(--svg-warning)" stroke-width="1" rx="4"/>
    <text x="601" y="205" class="component-text" text-anchor="middle">Jaeger</text>
    <text x="601" y="220" class="label-text" text-anchor="middle">分散トレース</text>
    
    <rect x="656" y="190" width="88" height="40" fill="white" stroke="var(--svg-warning)" stroke-width="1" rx="4"/>
    <text x="700" y="205" class="component-text" text-anchor="middle">Zipkin</text>
    <text x="700" y="220" class="label-text" text-anchor="middle">APM</text>
    
    <rect x="556" y="240" width="90" height="40" fill="white" stroke="var(--svg-warning)" stroke-width="1" rx="4"/>
    <text x="601" y="255" class="component-text" text-anchor="middle">OpenTelemetry</text>
    <text x="601" y="270" class="label-text" text-anchor="middle">標準化</text>
    
    <rect x="656" y="240" width="88" height="40" fill="white" stroke="var(--svg-warning)" stroke-width="1" rx="4"/>
    <text x="700" y="255" class="component-text" text-anchor="middle">X-Ray</text>
    <text x="700" y="270" class="label-text" text-anchor="middle">AWS</text>
  </g>

  <!-- Storage & Query Layer -->
  <g id="storage-layer">
    <rect x="40" y="320" width="340" height="120" fill="var(--svg-bg-alt)" stroke="var(--svg-border)" stroke-width="2" rx="4"/>
    <text x="210" y="340" class="component-text" text-anchor="middle" font-weight="500">ストレージ & クエリ</text>
    
    <rect x="56" y="350" width="100" height="70" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="106" y="370" class="component-text" text-anchor="middle">時系列DB</text>
    <text x="106" y="385" class="label-text" text-anchor="middle">InfluxDB</text>
    <text x="106" y="400" class="label-text" text-anchor="middle">TimescaleDB</text>
    <text x="106" y="415" class="label-text" text-anchor="middle">VictoriaMetrics</text>
    
    <rect x="166" y="350" width="100" height="70" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="216" y="370" class="component-text" text-anchor="middle">検索エンジン</text>
    <text x="216" y="385" class="label-text" text-anchor="middle">Elasticsearch</text>
    <text x="216" y="400" class="label-text" text-anchor="middle">OpenSearch</text>
    <text x="216" y="415" class="label-text" text-anchor="middle">Loki</text>
    
    <rect x="276" y="350" width="88" height="70" fill="white" stroke="var(--svg-border)" stroke-width="1" rx="4"/>
    <text x="320" y="370" class="component-text" text-anchor="middle">オブジェクト</text>
    <text x="320" y="385" class="label-text" text-anchor="middle">S3/MinIO</text>
    <text x="320" y="400" class="label-text" text-anchor="middle">長期保存</text>
    <text x="320" y="415" class="label-text" text-anchor="middle">コスト最適化</text>
  </g>

  <!-- Analysis & Visualization -->
  <g id="analysis-layer">
    <rect x="400" y="320" width="360" height="120" class="analysis-layer" rx="4"/>
    <text x="580" y="340" class="section-title" text-anchor="middle">分析 & 可視化</text>
    
    <rect x="416" y="350" width="100" height="70" fill="white" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="466" y="370" class="component-text" text-anchor="middle">ダッシュボード</text>
    <text x="466" y="385" class="label-text" text-anchor="middle">Grafana</text>
    <text x="466" y="400" class="label-text" text-anchor="middle">Kibana</text>
    <text x="466" y="415" class="label-text" text-anchor="middle">Datadog</text>
    
    <rect x="526" y="350" width="110" height="70" fill="white" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="581" y="370" class="component-text" text-anchor="middle">アラート管理</text>
    <text x="581" y="385" class="label-text" text-anchor="middle">AlertManager</text>
    <text x="581" y="400" class="label-text" text-anchor="middle">PagerDuty</text>
    <text x="581" y="415" class="label-text" text-anchor="middle">Opsgenie</text>
    
    <rect x="646" y="350" width="98" height="70" fill="white" stroke="var(--svg-error)" stroke-width="1" rx="4"/>
    <text x="695" y="370" class="component-text" text-anchor="middle">AI/ML分析</text>
    <text x="695" y="385" class="label-text" text-anchor="middle">異常検知</text>
    <text x="695" y="400" class="label-text" text-anchor="middle">予測分析</text>
    <text x="695" y="415" class="label-text" text-anchor="middle">根本原因</text>
  </g>

  <!-- Observability Pillars -->
  <g id="pillars">
    <rect x="40" y="460" width="720" height="120" fill="var(--svg-bg-alt)" stroke="var(--svg-border)" stroke-width="2" rx="4"/>
    <text x="400" y="480" class="component-text" text-anchor="middle" font-weight="500">可観測性の3本柱と統合</text>
    
    <rect x="80" y="490" width="180" height="70" fill="white" stroke="var(--svg-primary)" stroke-width="2" rx="4"/>
    <text x="170" y="510" class="component-text" text-anchor="middle" font-weight="500">メトリクス</text>
    <text x="170" y="525" class="label-text" text-anchor="middle">• リアルタイム監視</text>
    <text x="170" y="540" class="label-text" text-anchor="middle">• 傾向分析</text>
    <text x="170" y="555" class="label-text" text-anchor="middle">• キャパシティ計画</text>
    
    <rect x="290" y="490" width="180" height="70" fill="white" stroke="var(--svg-success)" stroke-width="2" rx="4"/>
    <text x="380" y="510" class="component-text" text-anchor="middle" font-weight="500">ログ</text>
    <text x="380" y="525" class="label-text" text-anchor="middle">• イベント記録</text>
    <text x="380" y="540" class="label-text" text-anchor="middle">• エラー調査</text>
    <text x="380" y="555" class="label-text" text-anchor="middle">• 監査証跡</text>
    
    <rect x="500" y="490" width="180" height="70" fill="white" stroke="var(--svg-warning)" stroke-width="2" rx="4"/>
    <text x="590" y="510" class="component-text" text-anchor="middle" font-weight="500">トレース</text>
    <text x="590" y="525" class="label-text" text-anchor="middle">• リクエスト追跡</text>
    <text x="590" y="540" class="label-text" text-anchor="middle">• レイテンシ分析</text>
    <text x="590" y="555" class="label-text" text-anchor="middle">• 依存関係マップ</text>
  </g>

  <!-- Data Flow Arrows -->
  <path d="M 400 140 L 400 160" class="data-flow"/>
  <path d="M 155 300 L 210 320" class="data-flow"/>
  <path d="M 405 300 L 380 320" class="data-flow"/>
  <path d="M 650 300 L 580 320" class="data-flow"/>
  
  <!-- Alert Flow -->
  <path d="M 580 440 L 580 460" class="alert-flow"/>
</svg>